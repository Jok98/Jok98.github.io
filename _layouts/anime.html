<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ page.title }}</title>
  <link rel="stylesheet" href="/assets/css/default_style.css">
  <link rel="stylesheet" href="/assets/css/anime_list.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="anime-layout">
<header>
  <nav class="navbar">
    <a href="/" class="nav-logo">Matteo Moi - Software Developer</a>
    <div class="nav-links">
      <a href="/" class="nav-link"><i class="fas fa-home"></i> Home</a>
      <a href="/cv" class="nav-link"><i class="fas fa-file-alt"></i> CV</a>
      <a href="https://github.com/Jok98" target="_blank" class="nav-link"><i class="fab fa-github"></i></a>
      <a href="https://www.linkedin.com/in/matteo-moi/" target="_blank" class="nav-link"><i class="fab fa-linkedin"></i></a>
      <span class="site-version">V2.5</span>
    </div>
  </nav>
</header>
<main class="anime-main">
  <div class="anime-wrapper">
    <h1 class="anime-title">{{ page.title }}</h1>
    {{ content }}
  </div>
</main>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const expandAllButton = document.getElementById('expand-all');
    const collapseAllButton = document.getElementById('collapse-all');
    const detailsElements = document.querySelectorAll('details');

    if (expandAllButton) {
      expandAllButton.addEventListener('click', () => {
        detailsElements.forEach(details => {
          details.open = true;
        });
      });
    }

    if (collapseAllButton) {
      collapseAllButton.addEventListener('click', () => {
        detailsElements.forEach(details => {
          details.open = false;
        });
      });
    }
  });

  const searchInput = document.getElementById('anime-search');
  if (searchInput) {
    searchInput.addEventListener('input', () => {
      const searchQuery = searchInput.value.toLowerCase();
      const detailsElements = document.querySelectorAll('details');

      detailsElements.forEach(details => {
        const gallery = details.querySelector('.anime-gallery');
        const cards = gallery.querySelectorAll('.anime-card');
        let hasVisibleCard = false;

        cards.forEach(card => {
          const title = card.querySelector('.anime-card__title').textContent.toLowerCase();
          if (title.includes(searchQuery)) {
            card.style.display = 'flex';
            hasVisibleCard = true;
          } else {
            card.style.display = 'none';
          }
        });

        if (hasVisibleCard) {
          details.style.display = 'block';
        } else {
          details.style.display = 'none';
        }
      });
    });
  }
</script>
<script src="/assets/script/script.js"></script>
</body>
</html>
